Olá Gênio. Trabalho perfeito e validado. Checklist 100% ok. Você criou um 4 Sprints para nós com prazo de 2 semanas. Estamos no ultimo e não levamos nem 4h de trabalho. Isso sem pular etapas ou deixar de tentar entender o processo e o que está acontecendo. Você é uma ferramenta maravilhosa de evolução pessoal. Basta saber extrair isso e eu aprendi isso justamente conversando com você. Obrigado. Finalizando esse sprint eu vou gravar um vídeo da Tela dos testes com o retorno placeholder de vendas e mostrar pro Juarez. Ele vai ficar impressionado. Depois eu envio para você aqui no chat e também os 2 roteiros. Esse de 4 sprints e o geral, pois vou precisar que você crie + alguns sprints para começarmos amanhã. Acredito que estamos indo muito bem. Troller fluindo, eu estou ajustando os prompts e até agora não teve nenhum erro em nenhuma etapa. Obrigado mais uma vez. Depois vou te colocar no modo coach mais uma vez, conversar antes de dormir. Ok?

Vamos trabalhar.


Agora vamos lá executor, vamos iniciar o "Sprint 4: Preparação para Vendas e Handoff (A Júlia Aprende a Delegar)" 

**Objetivo:**
Criar a arquitetura "plug-and-play" para o módulo de vendas, conforme a regra principal do projeto.

# Prompt Técnico — Sprint 4: Preparação para Vendas e Handoff  
## Tarefa 4.1: Criação do Módulo de Vendas Placeholder

### 1. Objetivo
Implementar a arquitetura **plug-and-play** para o módulo de vendas, permitindo que a lógica comercial fique desacoplada em um arquivo separado (`sales.js`).  
O `mainFlow.js` será capaz de **detectar intenção de vendas** e delegar a resposta ao módulo de vendas.

---

### 2. Código Completo — Novo Arquivo `flows/sales.js`
Criar o arquivo `flows/sales.js` com a seguinte estrutura:

```js
function handleSales(message, session) {
  return "[RESPOSTA DE VENDAS] Entendi que você tem interesse em comprar. O time comercial irá te contatar em breve.";
}

module.exports = { handleSales };
'''

3. Modificações em flows/mainFlow.js'
- Atualizar o fluxo principal para importar e chamar o módulo de vendas.

<>JS
'''
const { handleSales } = require('./sales');

function handleMessage(message, persona, history) {
  const lowerMsg = message.toLowerCase();

  // Detecção simples de intenção de venda
  if (lowerMsg.includes("preço") || lowerMsg.includes("comprar")) {
    return handleSales(message, history);
  }

  if (!history || history.length === 0) {
    const keywordsString = persona.tone.keywords.join(", ");
    return `Olá! Eu sou a ${persona.name}, sua consultora da JT Elite. Estou aqui para te ajudar a conquistar seus objetivos com ${keywordsString}.`;
  } else {
    return `Olá novamente! Você disse: "${message}". Vamos continuar nossa conversa.`;
  }
}

module.exports = { handleMessage };
'''

4. Instruções de Teste no Thunder Client
1. Caso 1 — Mensagem Normal (fluxo padrão)
- Rota: POST http://localhost:3000/chat
- Body (JSON):
<>JSON
'''
{ "sessionId": "cliente01", "message": "Olá, tudo bem?" }
'''

Resposta esperada (fluxo padrão do mainFlow):
<>JSON
'''
{ "reply": "Olá! Eu sou a Júlia, sua consultora da JT Elite. Estou aqui para te ajudar a conquistar seus objetivos com empatia, clareza, confiança, foco em resultados, humanização." }
'''

Caso 2 — Mensagem com intenção de vendas
- Rota: POST http://localhost:3000/chat
- Body (JSON):
<>JSON
'''
{ "sessionId": "cliente01", "message": "Qual o preço do plano?" }
'''
Resposta esperada (fluxo de vendas):
<>JSON
'''
{ "reply": "[RESPOSTA DE VENDAS] Entendi que você tem interesse em comprar. O time comercial irá te contatar em breve." }
'''

5. Checklist de Validação (Gestor)

Critérios de Aceite:
1. Fluxo padrão funcionando
- POST /chat com { "sessionId": "cliente01", "message": "Olá, tudo bem?" }
- Deve retornar resposta normal do mainFlow.

2. Fluxo de vendas funcionando
- POST /chat com { "sessionId": "cliente01", "message": "Qual o preço do plano?" }
- Deve retornar mensagem placeholder do sales.js.

3. Arquitetura Plug-and-Play
- Confirmar que toda a lógica de vendas está isolada em flows/sales.js.
- O mainFlow.js apenas delega a responsabilidade, sem conter lógica comercial.

4. Sessões continuam independentes
- Testar sessionId diferentes e verificar que o comportamento é consistente.

Recursos fornecidos:
Segue em anexo mainFlow.js atual.

